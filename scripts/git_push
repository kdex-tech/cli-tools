#!/bin/sh

set -e

cd "${WORKDIR}"
source .env

# 1. Commit and Push
git add "${TARGET_DIR}"
if git diff-index --quiet HEAD; then
  echo "No changes detected for this iteration."
else
  git commit -m "Update function: ${FUNCTION_NAME} at ${FUNCTION_BASEPATH}"
  git push origin "${BRANCH_NAME}"
fi
